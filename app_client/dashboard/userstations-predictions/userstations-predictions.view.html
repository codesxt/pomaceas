<div class="app-container container-fluid">
<div class="row">
  <dashboard-navigation></dashboard-navigation>

  <div class="col-md-9">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">
          <button class="btn btn-default btn-xs" back-button><span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span> Volver</button>
          Estimaciones para la estación <strong>{{ vm.station.name }}</strong>
        </h3>
      </div>
      <div class="panel-body">
        <h1>Sistema de Estimaciones</h1>
        <div ng-if="vm.isSectorEmpty()">
          <p>Aún no se ha registrado un cuartel para la estación.</p>
          <p>Se debe registrar al menos un cuartel por estación con su variedad de cultivar correspondiente para efectuar las predicciones.</p>
        </div>
        <div ng-if="!vm.stationSummary.lastReading">
          La estación no tiene datos para hacer estimaciones. Se deben subir datos a la estación para poder efectuar cálculos.
        </div>
        <div class="alert alert-danger" role="alert" ng-show="vm.errMessage">{{ vm.errMessage }}</div>
        <div class="alert alert-info" role="alert" ng-show="vm.formInfo">{{vm.formInfo}}</div>
        <div ng-if="vm.station && !vm.isSectorEmpty() && vm.stationSummary.lastReading">
          <form class="form-inline well clearfix">
            <div class="form-group col-md-4">
              <label for="sector" class="control-label">Cuartel</label>
              <select class="form-control" id="sector" ng-model="vm.selectedSectorIndex">
                <option ng-repeat="sector in vm.station.sectors" value="{{$index}}">
                  {{ sector.name}}
                </option>
              </select>
            </div>
            <div class="form-group col-md-4" style="padding-top:15px;">
              <label for="category" class="control-label">Cultivar:</label>
              <span> {{ vm.selectedSector.cultivar | cultivarTranslate }} </span>
            </div>
            <div class="form-group col-md-4">
              <label for="year" class="control-label">Período:</label>
              <select class="form-control" id="year" ng-model="vm.selectedYear">
                <option ng-repeat="y in vm.yearsAvailable" value="{{y}}">{{y | yearToPeriod}}</option>
              </select>
            </div>
          </form>
          <hr/>

          <div ng-show="vm.selectedSector.cultivar=='gala'">
            <!--
            <form class="form-inline well clearfix">
              <div class="form-group col-md-6">
                <label for="sector" class="control-label">Seleccione una estimación:</label>
                <select class="form-control" id="prediction" ng-model="vm.predictionDisplayed">
                  <option ng-repeat="prediction in vm.predictionsList" value="{{prediction.value}}">
                    {{ prediction.name }}
                  </option>
                </select>
              </div>
            </form>
            -->

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Calibre</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones para el porcentaje de frutos con calibres grandes y el peso medio para los frutos.</p>
                <p ng-if="vm.predictions.size!='no-data'">El rango se define considerando un {{ vm.predictions.size.errorMargin }}% de margen de error.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.size!='no-data'">
                  <thead>
                    <td class="col-md-4 success">
                      <strong>Característica</strong>
                    </td>
                    <td class="col-md-8 success">
                      <strong>Rango de valores</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Porcentaje de frutos en calibres grandes</td>
                      <td class="pred-result">{{ vm.predictions.size.bigSizePercent - vm.predictions.size.errorMargin | number:0 }}% - {{ vm.predictions.size.bigSizePercent + vm.predictions.size.errorMargin | number:0 }}%</td>
                    </tr>
                    <tr>
                      <td>Peso medio de los frutos (g)</td>
                      <td class="pred-result">Entre {{ (vm.predictions.size.avgWeight | number:0) - 10 }} g. y {{ (vm.predictions.size.avgWeight | number:0)*1 + 10 }} g.</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.size=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos durante octubre durante el año seleccionado. Se deben subir datos de octubre al sistema para poder llevar acabo las predicciones.
                </div>
              </div>
            </div>


            <div class="panel panel-success">
              <div class="panel-heading"><h3>Inicio Aproximado de Cosecha</h3></div>
              <div class="panel-body">
                <p>Para calcular la fecha estimada de inicio de cosecha se requiere la fecha de floración. Por favor, ingrésela haciendo click en el ícono del calendario y luego presione calcular.</p>
                <div class="row">
                  <div class="col-md-5">
                    <div class="input-group">
                      <span class="input-group-addon">Floración: </span>
                      <input type="text" readonly
                        class="form-control"
                        uib-datepicker-popup="{{vm.startCalendar.format}}"
                        ng-model="vm.floweringDate"
                        is-open="vm.startCalendar.isOpen"
                        datepicker-options="vm.dateOptions"
                        ng-required="true"
                        close-text="Cerrar"/>
                        <span class="input-group-btn">
                          <button type="button"
                          class="btn btn-success"
                          ng-click="vm.openCal1()">
                            <i class="glyphicon glyphicon-calendar"></i>
                          </button>
                        </span>
                    </div>
                    <br/>
                    <button type="button" class="btn btn-success btn-block" ng-click="vm.getHarvestDate()">Calcular</button>
                  </div>
                  <div class="col-md-7">
                    <div ng-if="vm.predictions.harvestDate && vm.predictions.harvestDate!='no-data'">
                      <div class="panel panel-success">
                        <div class="panel-heading">Fecha estimada de cosecha</div>
                        <div class="panel-body">
                          Según los datos obtenidos por el sistema, se estima como día de cosecha entre: <b>{{vm.predictions.harvestDate | amSubtract : '3' : 'days' | amDateFormat:'DD [de] MMMM' }} y {{vm.predictions.harvestDate | amAdd : '3' : 'days' | amDateFormat:'DD [de] MMMM [de] YYYY' }}</b>
                        </div>
                      </div>
                    </div>
                    <div class="alert alert-warning" ng-if="vm.predictions.harvestDate=='no-data'">
                      <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                      <strong>Se necesitan datos.</strong> No existen datos suficientes para estimar la fecha de cosecha. Se necesitan datos de al menos 30 días desde la fecha de floración.
                    </div>
                  </div>
                </div>
              </div>
            </div>


            <div class="panel panel-success">
              <div class="panel-heading"><h3>Color</h3></div>
              <div class="panel-body">
                <p>La estimación del potencial de color de los frutos se calcula durante el mes previo a la cosecha.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.colorPotential.potential!='no-data'">
                  <thead>
                    <td class="col-md-4 success">Potencial</td>
                    <td class="col-md-8 success">Horas con t < 10°C</td>
                  </thead>
                  <tbody>
                    <tr ng-if="vm.predictions.colorPotential.potential=='low-potential'">
                      <td class="pred-result">Bajo Potencial (entre 0 y 10 horas)</td>
                      <td class="pred-result">{{ vm.predictions.colorPotential.hours | number:0 }} horas</td>
                    </tr>
                    <tr ng-if="vm.predictions.colorPotential.potential=='mid-potential'">
                      <td>Medio Potencial (entre 10 y 20 horas)</td>
                      <td>{{ vm.predictions.colorPotential.hours | number:0 }} horas</td>
                    </tr>
                    <tr ng-if="vm.predictions.colorPotential.potential=='high-potential'">
                      <td>Alto Potencial (más de 20 horas)</td>
                      <td>{{ vm.predictions.colorPotential.hours | number:0 }} horas</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.colorPotential.potential=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos durante enero durante el año seleccionado. Se deben subir datos de enero al sistema para poder llevar acabo las predicciones.
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Potencial Almacenaje Temprano</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones sobre el potencial de almacenaje previo a la cosecha del año {{(+vm.selectedYear+1)}}.</p>
                <p>Se consideran mediciones de la temperatura durante octubre y el informe nutricional de Fruto a 60 ddpf del año {{vm.selectedYear}}.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.earlyStorageGala!='no-data'">
                  <thead>
                    <td class="col-md-3 success">
                      <strong>Índice de Potencial</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Potencial de almacenaje</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Temperatura Promedio</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.earlyStorageGala.riskIndex }}</td>
                      <td class="pred-result">
                        <span ng-if="vm.predictions.earlyStorageGala.potential=='low'">
                          Bajo
                        </span>
                        <span ng-if="vm.predictions.earlyStorageGala.potential=='mid'">
                          Medio
                        </span>
                        <span ng-if="vm.predictions.earlyStorageGala.potential=='high'">
                          Alto
                        </span>
                      </td>
                      <td class="pred-result">{{ vm.predictions.earlyStorageGala.monthAvgTemp | number:1 }}°C</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.earlyStorageGala=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos suficientes para estimar el potencial de almacenaje temprano para la cosecha del año {{(+vm.selectedYear+1)}}.<br/>
                  Puede ser alguna de estas razones:
                  <ul>
                    <li>No hay datos en el sistema en octubre de {{vm.selectedYear}}.</li>
                    <li>No hay un registro de información nutricional para fruto pequeño en el año {{vm.selectedYear}}.</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Potencial Almacenaje a Cosecha</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones sobre el potencial de almacenaje de la cosecha del año {{(+vm.selectedYear)}}.</p>
                <p>Se consideran mediciones de la temperatura durante octubre, el estrés entre diciembre y enero,
                  y el informe nutricional de Fruto a Cosecha del año {{vm.selectedYear}}.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.harvestStorageGala!='no-data'">
                  <thead>
                    <td class="col-md-3 success">
                      <strong>Índice de Riesgo</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Potencial de almacenaje</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Unidades de Estrés</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Temperatura Promedio</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.harvestStorageGala.riskIndex }}</td>
                      <td class="pred-result">
                        <span ng-if="vm.predictions.harvestStorageGala.potential=='low'">
                          Bajo
                        </span>
                        <span ng-if="vm.predictions.harvestStorageGala.potential=='mid'">
                          Medio
                        </span>
                        <span ng-if="vm.predictions.harvestStorageGala.potential=='high'">
                          Alto
                        </span>
                      </td>
                      <td class="pred-result">{{ vm.predictions.harvestStorageGala.stress | number:1 }}</td>
                      <td class="pred-result">{{ vm.predictions.harvestStorageGala.monthAvgTemp | number:1 }}°C</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.harvestStorageGala=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos suficientes para estimar el potencial de almacenaje para el año {{vm.selectedYear}}.<br/>
                  Puede ser alguna de estas razones:
                  <ul>
                    <li>No hay datos en el sistema en octubre de {{vm.selectedYear}}.</li>
                    <li>No hay un registro de información nutricional para fruto maduro en el año {{vm.selectedYear}}.</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Potencial Ocurrencia Lenticelosis</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones sobre el potencial de ocurrencia de Lenticelosis.</p>
                <p>Se consideran mediciones desde diciembre del año anterior y enero del año de cosecha,
                  además de la información nutricional del momento de cosecha.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.lenticelosisGala!='no-data'">
                  <thead>
                    <td class="col-md-3 success">
                      <strong>Índice de Riesgo</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Potencial de ocurrencia</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Unidades de Estrés</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Días con T° > 29°C</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.lenticelosisGala.riskIndex }}</td>
                      <td class="pred-result">
                        <span ng-if="vm.predictions.lenticelosisGala.risk=='low'">
                          Bajo
                        </span>
                        <span ng-if="vm.predictions.lenticelosisGala.risk=='mid'">
                          Medio
                        </span>
                        <span ng-if="vm.predictions.lenticelosisGala.risk=='high'">
                          Alto
                        </span>
                      </td>
                      <td class="pred-result">{{ vm.predictions.lenticelosisGala.stress | number:0 }}</td>
                      <td class="pred-result">{{ vm.predictions.lenticelosisGala.tempOver29 }}</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.lenticelosisGala=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos suficientes para estimar la ocurrencia de Lenticelosis durante el año {{vm.selectedYear}}.<br/>
                  Puede ser alguna de estas razones:
                  <ul>
                    <li>No hay datos en el sistema entre diciembre de {{(vm.selectedYear-1)}} y enero de {{vm.selectedYear}}.</li>
                    <li>No hay un registro de información nutricional para fruto maduro en el año {{vm.selectedYear}}</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div ng-show="vm.selectedSector.cultivar=='fuji'">
            <div class="panel panel-success">
              <div class="panel-heading"><h3>Potencial Almacenaje Temprano</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones sobre el potencial de almacenaje previo a la cosecha del año {{(+vm.selectedYear+1)}}.</p>
                <p>Se consideran mediciones de la temperatura durante octubre y el informe nutricional de Fruto a 60 ddpf del año {{vm.selectedYear}}.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.earlyStorageFuji!='no-data'">
                  <thead>
                    <td class="col-md-3 success">
                      <strong>Índice de Riesgo</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Potencial de almacenaje</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Temperatura Promedio</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.earlyStorageFuji.riskIndex }}</td>
                      <td class="pred-result">
                        <span ng-if="vm.predictions.earlyStorageFuji.potential=='low'">
                          Bajo
                        </span>
                        <span ng-if="vm.predictions.earlyStorageFuji.potential=='mid'">
                          Medio
                        </span>
                        <span ng-if="vm.predictions.earlyStorageFuji.potential=='high'">
                          Alto
                        </span>
                      </td>
                      <td class="pred-result">{{ vm.predictions.earlyStorageFuji.monthAvgTemp | number:1 }}°C</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.earlyStorageFuji=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos suficientes para estimar el potencial de almacenaje temprano para la cosecha del año {{(+vm.selectedYear+1)}}.<br/>
                  Puede ser alguna de estas razones:
                  <ul>
                    <li>No hay datos en el sistema en octubre de {{vm.selectedYear}}.</li>
                    <li>No hay un registro de información nutricional para Fruto a 60 ddpf en el año {{vm.selectedYear}}.</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Potencial Almacenaje a Cosecha</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones sobre el potencial de almacenaje de la cosecha del año {{(+vm.selectedYear)}}.</p>
                <p>Se consideran mediciones de la temperatura durante octubre, el estrés entre diciembre y marzo,
                  y el informe nutricional de Fruto a Cosecha del año {{vm.selectedYear}}.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.harvestStorageFuji!='no-data'">
                  <thead>
                    <td class="col-md-3 success">
                      <strong>Índice de Riesgo</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Potencial de almacenaje</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Unidades de Estrés</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Temperatura Promedio</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.harvestStorageFuji.riskIndex }}</td>
                      <td class="pred-result">
                        <span ng-if="vm.predictions.harvestStorageFuji.potential=='low'">
                          Bajo
                        </span>
                        <span ng-if="vm.predictions.harvestStorageFuji.potential=='mid'">
                          Medio
                        </span>
                        <span ng-if="vm.predictions.harvestStorageFuji.potential=='high'">
                          Alto
                        </span>
                      </td>
                      <td class="pred-result">{{ vm.predictions.harvestStorageFuji.stress | number:1 }}</td>
                      <td class="pred-result">{{ vm.predictions.harvestStorageFuji.monthAvgTemp | number:1 }}°C</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.harvestStorageFuji=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos suficientes para estimar el potencial de almacenaje para el año {{vm.selectedYear}}.<br/>
                  Puede ser alguna de estas razones:
                  <ul>
                    <li>No hay datos en el sistema en octubre de {{vm.selectedYear}}.</li>
                    <li>No hay un registro de información nutricional para Fruto a Cosecha en el año {{vm.selectedYear}}.</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Incidencia Daño por Sol</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones para el porcentaje de incidencias de daño por sol.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.sunFuji!='no-data'">
                  <thead>
                    <td class="col-md-4 success">
                      <strong>Días de Riesgo</strong>
                    </td>
                    <td class="col-md-8 success">
                      <strong>Porcentaje de Incidencia de Daño por Sol</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.sunFuji.riskDays }} días</td>
                      <td class="pred-result">{{ vm.predictions.sunFuji.incidence | number:1 }}%</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.sunFuji=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos durante enero durante el año seleccionado. Se deben subir datos de enero al sistema para poder llevar acabo las predicciones.
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Incidencia Russet</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones para el porcentaje de incidencias de Russet.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.russetFuji!='no-data'">
                  <thead>
                    <td class="col-md-4 success">
                      <strong>Horas bajo 7°C en Octubre</strong>
                    </td>
                    <td class="col-md-8 success">
                      <strong>Porcentaje de Incidencia de Russet</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.russetFuji.hours }} horas</td>
                      <td class="pred-result">{{ vm.predictions.russetFuji.incidence | number:1 }}%</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.russetFuji=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos durante octubre durante el año seleccionado. Se deben subir datos de octubre al sistema para poder llevar acabo las predicciones.
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Color</h3></div>
              <div class="panel-body">
                <p>La estimación del potencial de color de los frutos se calcula durante el mes previo a la cosecha.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.colorPotential.potential!='no-data'">
                  <thead>
                    <td class="col-md-4 success">Potencial</td>
                    <td class="col-md-8 success">Días con 5 Hrs. de T < 5°C</td>
                  </thead>
                  <tbody>
                    <tr ng-if="vm.predictions.colorPotential.potential=='low-potential'">
                      <td class="pred-result">Bajo Potencial (< 5 días)</td>
                      <td class="pred-result">{{ vm.predictions.colorPotential.days | number:0 }} días</td>
                    </tr>
                    <tr ng-if="vm.predictions.colorPotential.potential=='mid-potential'">
                      <td class="pred-result">Medio Potencial (5 días)</td>
                      <td class="pred-result">{{ vm.predictions.colorPotential.days | number:0 }} días</td>
                    </tr>
                    <tr ng-if="vm.predictions.colorPotential.potential=='high-potential'">
                      <td class="pred-result">Alto Potencial (> 5 días)</td>
                      <td class="pred-result">{{ vm.predictions.colorPotential.days | number:0 }} días</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.colorPotential.potential=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos durante marzo durante el año seleccionado. Se deben subir datos de marzo al sistema para poder llevar acabo las predicciones.
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Potencial Ocurrencia Bitter Pit</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones sobre el potencial de ocurrencia de Bitter Pit.</p>
                <p>Se consideran mediciones desde diciembre del año anterior y marzo del año de cosecha,
                  además de la información nutricional del momento de cosecha.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.bitterFuji!='no-data'">
                  <thead>
                    <td class="col-md-3 success">
                      <strong>Índice de Riesgo</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Potencial de ocurrencia</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Unidades de Estrés</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Días con T° > 29°C</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.bitterFuji.riskIndex }}</td>
                      <td class="pred-result">
                        <span ng-if="vm.predictions.bitterFuji.risk=='low'">
                          Bajo
                        </span>
                        <span ng-if="vm.predictions.bitterFuji.risk=='mid'">
                          Medio
                        </span>
                        <span ng-if="vm.predictions.bitterFuji.risk=='high'">
                          Alto
                        </span>
                      </td>
                      <td class="pred-result">{{ vm.predictions.bitterFuji.stress | number:0 }}</td>
                      <td class="pred-result">{{ vm.predictions.bitterFuji.tempOver29 }}</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.bitterFuji=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos suficientes para estimar la ocurrencia de Bitter Pit durante el año {{vm.selectedYear}}.<br/>
                  Puede ser alguna de estas razones:
                  <ul>
                    <li>No hay datos en el sistema entre diciembre de {{(vm.selectedYear-1)}} y marzo de {{vm.selectedYear}}.</li>
                    <li>No hay un registro de información nutricional para Fruto a Cosecha en el año {{vm.selectedYear}}</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div ng-show="vm.selectedSector.cultivar=='cripps_pink'">
            <div class="panel panel-success">
              <div class="panel-heading"><h3>Potencial Almacenaje Temprano</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones sobre el potencial de almacenaje previo a la cosecha del año {{(+vm.selectedYear+1)}}.</p>
                <p>Se consideran mediciones de la temperatura durante octubre y el informe nutricional de Fruto a 60 ddpf del año {{vm.selectedYear}}.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.earlyStoragePink!='no-data'">
                  <thead>
                    <td class="col-md-3 success">
                      <strong>Índice de Riesgo</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Potencial de almacenaje</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Temperatura Promedio</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.earlyStoragePink.riskIndex }}</td>
                      <td class="pred-result">
                        <span ng-if="vm.predictions.earlyStoragePink.potential=='low'">
                          Bajo
                        </span>
                        <span ng-if="vm.predictions.earlyStoragePink.potential=='mid'">
                          Medio
                        </span>
                        <span ng-if="vm.predictions.earlyStoragePink.potential=='high'">
                          Alto
                        </span>
                      </td>
                      <td class="pred-result">{{ vm.predictions.earlyStoragePink.monthAvgTemp | number:1 }}°C</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.earlyStoragePink=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos suficientes para estimar el potencial de almacenaje temprano para la cosecha del año {{(+vm.selectedYear+1)}}.<br/>
                  Puede ser alguna de estas razones:
                  <ul>
                    <li>No hay datos en el sistema en octubre de {{vm.selectedYear}}.</li>
                    <li>No hay un registro de información nutricional para fruto a 60 ddpf en el año {{vm.selectedYear}}.</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Potencial Almacenaje a Cosecha</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones sobre el potencial de almacenaje de la cosecha del año {{(+vm.selectedYear)}}.</p>
                <p>Se consideran mediciones de la temperatura durante octubre, el estrés entre diciembre y marzo,
                  y el informe nutricional de Fruto a Cosecha del año {{vm.selectedYear}}.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.harvestStoragePink!='no-data'">
                  <thead>
                    <td class="col-md-3 success">
                      <strong>Índice de Riesgo</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Potencial de almacenaje</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Unidades de Estrés</strong>
                    </td>
                    <td class="col-md-3 success">
                      <strong>Temperatura Promedio</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.harvestStoragePink.riskIndex }}</td>
                      <td class="pred-result">
                        <span ng-if="vm.predictions.harvestStoragePink.potential=='low'">
                          Bajo
                        </span>
                        <span ng-if="vm.predictions.harvestStoragePink.potential=='mid'">
                          Medio
                        </span>
                        <span ng-if="vm.predictions.harvestStoragePink.potential=='high'">
                          Alto
                        </span>
                      </td>
                      <td class="pred-result">{{ vm.predictions.harvestStoragePink.stress | number:1 }}</td>
                      <td class="pred-result">{{ vm.predictions.harvestStoragePink.monthAvgTemp | number:1 }}°C</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.harvestStoragePink=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos suficientes para estimar el potencial de almacenaje para el año {{vm.selectedYear}}.<br/>
                  Puede ser alguna de estas razones:
                  <ul>
                    <li>No hay datos en el sistema en octubre de {{(vm.selectedYear-1)}}.</li>
                    <li>No hay un registro de información nutricional para Fruto a Cosecha en el año {{vm.selectedYear}}.</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Incidencia Daño por Sol</h3></div>
              <div class="panel-body">
                <p>Se realizan estimaciones para el porcentaje de incidencias de daño por sol.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.sunPink!='no-data'">
                  <thead>
                    <td class="col-md-4 success">
                      <strong>Días de Riesgo</strong>
                    </td>
                    <td class="col-md-8 success">
                      <strong>Porcentaje de Incidencia de Daño por Sol</strong>
                    </td>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="pred-result">{{ vm.predictions.sunPink.riskDays }} días</td>
                      <td class="pred-result">{{ vm.predictions.sunPink.incidence | number:1 }}%</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.sunPink=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos durante enero durante el año seleccionado. Se deben subir datos de enero al sistema para poder llevar acabo las predicciones.
                </div>
              </div>
            </div>

            <div class="panel panel-success">
              <div class="panel-heading"><h3>Color</h3></div>
              <div class="panel-body">
                <p>La estimación del potencial de color de los frutos se calcula durante el mes previo a la cosecha.</p>
                <table class="table table-stripped table-hover table-bordered" ng-if="vm.predictions.colorPotential.potential!='no-data'">
                  <thead>
                    <td class="col-md-4 success">Potencial</td>
                    <td class="col-md-8 success">Días con 5 Hrs. de T < 5°C</td>
                  </thead>
                  <tbody>
                    <tr ng-if="vm.predictions.colorPotential.potential=='low-potential'">
                      <td class="pred-result">Bajo Potencial (< 5 días)</td>
                      <td class="pred-result">{{ vm.predictions.colorPotential.days | number:0 }} días</td>
                    </tr>
                    <tr ng-if="vm.predictions.colorPotential.potential=='mid-potential'">
                      <td class="pred-result">Medio Potencial (5 días)</td>
                      <td class="pred-result">{{ vm.predictions.colorPotential.days | number:0 }} días</td>
                    </tr>
                    <tr ng-if="vm.predictions.colorPotential.potential=='high-potential'">
                      <td class="pred-result">Alto Potencial (> 5 días)</td>
                      <td class="pred-result">{{ vm.predictions.colorPotential.days | number:0 }} días</td>
                    </tr>
                  </tbody>
                </table>
                <div class="alert alert-warning" ng-if="vm.predictions.colorPotential.potential=='no-data'">
                  <span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                  <strong>Se necesitan datos.</strong> No existen datos durante marzo durante el año seleccionado. Se deben subir datos de marzo al sistema para poder llevar acabo las predicciones.
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <footer></footer>
</div>
</div>

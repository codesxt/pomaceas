<div class="app-container container-fluid">
<div class="row">
  <dashboard-navigation></dashboard-navigation>

  <div class="col-md-9">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">
          <button class="btn btn-default btn-xs" back-button>< Volver</button>
          Estadísticas mensuales para la estación {{vm.station.name }}
        </h3>
      </div>
      <div class="panel-body">
        <div class="alert alert-danger" role="alert" ng-show="vm.errMessage">{{ vm.errMessage }}</div>
        <div class="alert alert-info" role="alert" ng-show="vm.formInfo">{{vm.formInfo}}</div>
        <div ng-if="vm.station">
          <form class="form-inline">
            <div class="form-group">
              <label for="date" class="control-label">Desde</label>
              <select class="form-control" id="date" ng-model="vm.selection.startdate">
                <option ng-repeat="date in vm.stationSummary.monthsAvailable" value="{{date._id}}">
                  {{date._id.year}}-{{date._id.month}}
                </option>
              </select>
              <label for="enddate" class="control-label">Hasta</label>
              <select class="form-control" id="enddate" ng-model="vm.selection.enddate">
                <option ng-repeat="date in vm.stationSummary.monthsAvailable" value="{{date._id}}">
                  {{date._id.year}}-{{date._id.month}}
                </option>
              </select>
              <label for="category" class="control-label">Categoría</label>
              <select class="form-control" id="category" ng-model="vm.selection.category">
                <option ng-repeat="cat in vm.categories" value="{{cat.value}}">
                  {{cat.name}}
                </option>
              </select>
            </div>
          </form>
          <div style="max-height:350px;margin-top:30px;margin-bottom:30px;">
            <linechart class="sensorChart" data="vm.data" options="vm.options"></linechart>
          </div>
          <table ng-if="vm.selection.category=='temperature'" class="table table-striped table-hover">
            <thead>
              <tr>
                <th>
                  Fecha
                </th>
                <th>
                  Media Diaria
                </th>
                <th>
                  Media Máxima
                </th>
                <th>
                  Media Mínima
                </th>
                <th>
                  Máxima
                </th>
                <th>
                  Mínima
                </th>
              </tr>
            </thead>
            <tbody>
              <tr ng-repeat="row in vm.data.dataset0">
                <td>
                  {{row.date}}
                </td>
                <td>
                  {{(row.tempMediaDiaria | number:1)}}°C
                </td>
                <td>
                  {{(row.tempMediaMax | number:1)}}°C
                </td>
                <td>
                  {{(row.tempMediaMin | number:1)}}°C
                </td>
                <td>
                  {{(row.tempMaxMax | number:1)}}°C
                </td>
                <td>
                  {{(row.tempMinMin | number:1)}}°C
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
